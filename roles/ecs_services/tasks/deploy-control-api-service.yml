---

  - name: Create task definition control-api
    ecs_taskdefinition:
      state: present
      family: "greymatter-control-api"
      network_mode: awsvpc
      launch_type: FARGATE
      cpu: 512
      memory: 1024
      region: "{{ aws_region }}"
      execution_role_arn: "{{ ecs_instance_role }}"
      task_role_arn: "{{ ecs_instance_role }}"
      volumes:
      - name: certs
      containers:
      - name: "proxy-control-api"
        essential: true
        image: "{{ greymatter_proxy_image }}"
        repositoryCredentials:
          credentialsParameter: "{{ credentials_parameter }}"
        dockerLabels:
          gm-cluster: "sidecar-control-api"
        environment:
        - name: "ENVOY_ADMIN_LOG_PATH"
          value: "/dev/stdout"
        - name: "PROXY_DYNAMIC"
          value: "true"
        - name: "XDS_CLUSTER"
          value: "control-api"
        - name: "XDS_HOST"
          value: control # todo point to gm-control
        - name: "XDS_PORT"
          value: 50000
        - name: "XDS_NODE_ID"
          value: "default-node"
        - name: "INGRESS_TLS_CERT"
          value: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZvRENDQTRpZ0F3SUJBZ0lDRUZvd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1lveEN6QUpCZ05WQkFZVEFsVlQKTVJFd0R3WURWUVFJREFoV2FYSm5hVzVwWVRFcU1DZ0dBMVVFQ2d3aFJHVmphWEJvWlhJZ1ZHVmphRzV2Ykc5bgplU0JUZEhWa2FXOXpMQ0JNVEVNdU1SUXdFZ1lEVlFRTERBdEZibWRwYm1WbGNtbHVaekVtTUNRR0ExVUVBd3dkClJHVmphWEJvWlhJZ1JFa3lSU0JKYm5SbGNtMWxaR2xoZEdVZ1EwRXdIaGNOTVRrd05EQXpNVGMxTnpFM1doY04KTWprd016TXhNVGMxTnpFM1dqQVVNUkl3RUFZRFZRUUREQWxrYVRKbExuUmxjM1F3Z2dFaU1BMEdDU3FHU0liMwpEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURPcDJTRHQ4R04vU0w4NGxESjBmM2JBTWNOVEJQU2RFZThkL253ClpmQUMvRkx0Ym1NR0J4Z3l3dmw3ZktEZWQxUXZ6OHp3eXZyNStnVlJEUUIzdlBCSGJxUnFqV2ZPOWZWNXEraFkKRjJPRDlCY3BINE5vUlZoRHhpVHZNb2hhNUNQMUQ1YitpbHBHY3NJTlRpbjV6SWlFb1YxWisrbUlVdGhrNlN4QQo2N1V6VXJPS1NnM2VUUHRaRjBrSVRxSm9kY1ljbjFwSEszWkEvK3BhTVdjNVFSRmVqSlFudFZaZ1M1aUxJTVZsCkwvWjM0Z3BNNHljbThheDlJWkwzVUN5SHg5RXNDTjYrcDhRbEFoVFVzaFhkdTNhcXlPUW1FQ0t0dE9TLzJmZjMKdG12Nk9zQ2dPSlZEaEZUT1UyM1haRmZFNzZ5L1RzTkkvb2YwSWMxMndra2M2eEZaQWdNQkFBR2pnZ0dETUlJQgpmekFKQmdOVkhSTUVBakFBTUJFR0NXQ0dTQUdHK0VJQkFRUUVBd0lHd0RBekJnbGdoa2dCaHZoQ0FRMEVKaFlrClQzQmxibE5UVENCSFpXNWxjbUYwWldRZ1UyVnlkbVZ5SUVObGNuUnBabWxqWVhSbE1CMEdBMVVkRGdRV0JCU0UKZktFZkhsejB5M2RBbGQwdCtSUkVTZGVYeHpDQnhRWURWUjBqQklHOU1JRzZnQlJ0NnZrNFE2QmZtdFNtTzNzQQpHOVZubE4rZ1RxR0JuYVNCbWpDQmx6RUxNQWtHQTFVRUJoTUNWVk14RVRBUEJnTlZCQWdNQ0ZacGNtZHBibWxoCk1STXdFUVlEVlFRSERBcEJiR1Y0WVc1a2NtbGhNU293S0FZRFZRUUtEQ0ZFWldOcGNHaGxjaUJVWldOb2JtOXMKYjJkNUlGTjBkV1JwYjNNc0lFeE1ReTR4RkRBU0JnTlZCQXNNQzBWdVoybHVaV1Z5YVc1bk1SNHdIQVlEVlFRRApEQlZFWldOcGNHaGxjaUJFU1RKRklGSnZiM1FnUTBHQ0FoQUFNQTRHQTFVZER3RUIvd1FFQXdJRm9EQWRCZ05WCkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0ZBWURWUjBSQkEwd0M0SUpaR2t5WlM1MFpYTjAKTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFBLzZJQkZzeHNhUTJienhNQW5Gc2E1Y3cxaVZSZmR0eTdheWFxbQpQOFRnd3NxV0dtb2xSMHB2VlF6VGpBRVZXc3BpWUwwUmUvbmRDa2Yyc0FHdDVxWkQrMWthTmcybm80Qi8yNkZHCjExaStGQ2VmeCtReVdmUC9XaE55aDY0SVpaZUpmeXZpNFVFYW9Dc1RObXhNc0c2QTlCL1hRcmN0TlRwc2RmcXcKQURuS2dHWXBqNEdtM0JOcE1EUUJlQ05UQko3YTdVdXIvbHZDaytxNTVJZTREbzVOM2FDOC9LajVBQjVVeFhXNgo5L1hRN1prTS9yWWdVOTVhRTlSaHNaR0gzUmVDZFEycXpUQ2NZS0JrQVpkT29XSkRjVU1GTCtXR1YwK1ZPT3h4Cm83TzZpQi9xc2ZHL2ZYMkUxMjlpSi8yYy9QOXJrZWpiQ2VQR0pnVmltdk1kVkFZUmovb1JGdjV3RURIcy9qd1UKakJxYWtyc294OEk1RllpeTFWWXlUUWloN2wwaWtLejkwaWRLZ0pBREI2NXpmb3ZwZmFJd0VLWlBUdk95bjFLaAo3SVFSQnZhUnlDZCtTbzVKd1AyaEVwcy9GS3U1Z0E0N29ySVpJT0RhbHNJSUk3QmgvaHNnZS9vcnVYWGtyK2tpCk1SSDQ0R3V4eEV2T1N3VktvNHJzR1NaZnVzUTV2dWd6ektTUFJNeGU0YU1ndzNoYTRac3NVQkRYMlB4UEc1KzgKSlBjQ0R3MkJobFJ6RVhHTDdxbm1CNitrRUw3OUw3cmpRRlJBK3ZXTTVTN2N5bGN1M1NaT1VPU3BJblBBa3VsVwpTYW9ISW5LOFpDSEEwd2E0MmY0M2dQN1VmcEJjekxDOTNVZVlzbHRuZkNxQjM1eXErVnExVG9XWC90Tm5XWG81CkxPRWpKQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0="
        - name: "INGRESS_TLS_KEY"
          value: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBNExzRGpQVUtPbXltNXcwY2piSFJCd2QyL0I1UGpGQnVUSHFGNHoyY3FFRDlrWWVjCmdPUm1XbWZoS0pHM0g3MVl3UXEwZDZOUE90bENGT0lvRXRlYU5kNVJRdVg1OElkREI4UlRZby9JNm1USlgwaVcKMTc0SGdqeDJTZjRXMlBvRE9OUmpUcGJVVXFDcm9KdzBtUFJaOXJ2cTJjV016M0FqZ1VGWWU1Z0l5ZFhmWnQxdgpoQ2pOOHF2VUZlNGliYmpQM1pkaDFmUkNQQkNXR1Jaa3UyQ29aRGZva1cwcmZjWmJQY0RiYm5Gai9YeU9ISXhTCjdoQWh3ZlpvUzh2QzNtMC9zeGhBRGRabXRkeFM4Q2p0WUdCWjA1aUhySW5JeHIzZnVzWGFNVk4wWmxCTlRqQ1cKQjk1S0MvaTJTK1F2MDd1N1BPUzNmM0lma0VyaUx4TXN5dTQzMndJREFRQUJBb0lCQUJtT2l3ZlRzaGNVMWlJKwpobm5DdUEvQmxKRjFiUHg3QlNBamF1aDkwRHYrTUJnRndSR1RaK1J1SGRmOFFrUVV4MndrcUlOV2lpTWFJLzYxCi9YS3ZIRFYyRSsyMHM2amI2UTZRRUIrTVZILzdlRDhpeFN6QnlwN1ArMi9NdXBKd1ZEOTVQOVhuSnp4Q1UySlAKZ1ZmSHFoZDZKV29nb2pQUS8raXFJc0xqZGxSbGpKVkZaeVJNbjQydEI2MmNhN3k1K1lBZXYwam9XQS9kVWdsSApGTS9CQmdhYzdjZTU5VkJobmdxODBIYTJtbXNZdU85LytKeTk4eXVaYU1jc3BWMStqaDczZkQ1OXBrTmEyU2NHCjQvci9NSUYwSG9pQ3hEUHZlOGJ1TEp1Mk5FRTZieUtIT3prTkJsWXZuaWh1YkpwV2ZDSnhDS3NBWVpwTC9nWVUKN0IrOU5XRUNnWUVBOE9wU1hucFpwckJuL0RhQ0NuSzMyeFZQY3F6WEFGRHJQQWR6TjB1YU4xN0hKRi9xN2V1Qwp1N21jSWtQdU1kaExjWGtVME1DYzUwODF3b3pHaXVEc0N5cFFmTjNUVWxFdEMxeUo1Rk9xN2hNaGxxYklBUGVJCnkvZ0tQMVRKemVPRjI4akVzYVViZlV6a3p1SllxK1VsenQvUE5IRDdlTURNUFlLSFJLKzBJYkVDZ1lFQTdzMUQKVEZXT1R1dlM3V01sU2c0L3RBZ3grTGlyZGpDZXRYTXU4RllOd2Jmem52aXJ1M0orZTJkVWRmOFg5SC80WnJpRwpsV3d2aDcrQWI5NFhYdDQzUkJPSEhIWFlxdWlkSUVsQlREMUZrSTBwSkhSOGl5ajRrSnFESnRYN3lydmF2eDJ0CkdDT3dQUDJHYVFyS3Bab00vbDFqSzVxUjFiM2pSZ3FHcmJtektVc0NnWUFHVHR4aFJPcmNCbnB5akNyVGd6VjEKTXhXbGR3a2FKUVJEeWg0bU1JQ1ZPcElVVGI2bEJDbWtLTFFCNGExMitLYmhEYjZSeUxsVEJTdnZNQ2h5c25qNwp3ZHZocVIxRFpvUzdhMnpnNFovMEkrUVpRYnl5NmNoWEx1TjF6UTZMcVkxenQ4b09yTGdQaTlmaDR1TlhmT1NFCmlpK3V1OWFaenRLS09jUzQ4N0RQd1FLQmdRREt2amlwNFdWOStkZk50Y1JkK0hUN1M0M3BwaGZrczJpN2t2eEMKRGoyRnY4QzFzbGhUUCtURXJyalZxV3RVS1NYalNEenpOYk93NDlTT3BaZGY4dmdtOHhGZUIydVp4djVJQUFuUgpTWi83RnUzY1JvM0t0RkU4ckFJM2dhdFJ0MllEcHBWa0RrQzl0MTFiWjA4ZmhBZ09HWWx0NXNCMElOQ0prYnhBCldJNFV1d0tCZ0JDUGRWMU1Ydk5iTWZuYTFhOUFDQ1VYVUNaL3NVTG9XK0ZkR3BSOGllcDhudzRra2VFektMVE0KMHdzZzZpaHI3NE5qSzNEcVdZbTRvbTZKNmxVRHdCdy8remVrcGticGh0SFh0bTAvOVVGNzVwVms3bjNVWldKUApuVXBjS3dTdUsrbEJiaXR0ek95WElZU2FhWnhHQ0Z3dno1NitZaGNOdi90a24zendZb3l2Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t"
        - name: "INGRESS_TLS_TRUST"
          value: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZvRENDQTRpZ0F3SUJBZ0lDRUZvd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1lveEN6QUpCZ05WQkFZVEFsVlQKTVJFd0R3WURWUVFJREFoV2FYSm5hVzVwWVRFcU1DZ0dBMVVFQ2d3aFJHVmphWEJvWlhJZ1ZHVmphRzV2Ykc5bgplU0JUZEhWa2FXOXpMQ0JNVEVNdU1SUXdFZ1lEVlFRTERBdEZibWRwYm1WbGNtbHVaekVtTUNRR0ExVUVBd3dkClJHVmphWEJvWlhJZ1JFa3lSU0JKYm5SbGNtMWxaR2xoZEdVZ1EwRXdIaGNOTVRrd05EQXpNVGMxTnpFM1doY04KTWprd016TXhNVGMxTnpFM1dqQVVNUkl3RUFZRFZRUUREQWxrYVRKbExuUmxjM1F3Z2dFaU1BMEdDU3FHU0liMwpEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURPcDJTRHQ4R04vU0w4NGxESjBmM2JBTWNOVEJQU2RFZThkL253ClpmQUMvRkx0Ym1NR0J4Z3l3dmw3ZktEZWQxUXZ6OHp3eXZyNStnVlJEUUIzdlBCSGJxUnFqV2ZPOWZWNXEraFkKRjJPRDlCY3BINE5vUlZoRHhpVHZNb2hhNUNQMUQ1YitpbHBHY3NJTlRpbjV6SWlFb1YxWisrbUlVdGhrNlN4QQo2N1V6VXJPS1NnM2VUUHRaRjBrSVRxSm9kY1ljbjFwSEszWkEvK3BhTVdjNVFSRmVqSlFudFZaZ1M1aUxJTVZsCkwvWjM0Z3BNNHljbThheDlJWkwzVUN5SHg5RXNDTjYrcDhRbEFoVFVzaFhkdTNhcXlPUW1FQ0t0dE9TLzJmZjMKdG12Nk9zQ2dPSlZEaEZUT1UyM1haRmZFNzZ5L1RzTkkvb2YwSWMxMndra2M2eEZaQWdNQkFBR2pnZ0dETUlJQgpmekFKQmdOVkhSTUVBakFBTUJFR0NXQ0dTQUdHK0VJQkFRUUVBd0lHd0RBekJnbGdoa2dCaHZoQ0FRMEVKaFlrClQzQmxibE5UVENCSFpXNWxjbUYwWldRZ1UyVnlkbVZ5SUVObGNuUnBabWxqWVhSbE1CMEdBMVVkRGdRV0JCU0UKZktFZkhsejB5M2RBbGQwdCtSUkVTZGVYeHpDQnhRWURWUjBqQklHOU1JRzZnQlJ0NnZrNFE2QmZtdFNtTzNzQQpHOVZubE4rZ1RxR0JuYVNCbWpDQmx6RUxNQWtHQTFVRUJoTUNWVk14RVRBUEJnTlZCQWdNQ0ZacGNtZHBibWxoCk1STXdFUVlEVlFRSERBcEJiR1Y0WVc1a2NtbGhNU293S0FZRFZRUUtEQ0ZFWldOcGNHaGxjaUJVWldOb2JtOXMKYjJkNUlGTjBkV1JwYjNNc0lFeE1ReTR4RkRBU0JnTlZCQXNNQzBWdVoybHVaV1Z5YVc1bk1SNHdIQVlEVlFRRApEQlZFWldOcGNHaGxjaUJFU1RKRklGSnZiM1FnUTBHQ0FoQUFNQTRHQTFVZER3RUIvd1FFQXdJRm9EQWRCZ05WCkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0ZBWURWUjBSQkEwd0M0SUpaR2t5WlM1MFpYTjAKTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFBLzZJQkZzeHNhUTJienhNQW5Gc2E1Y3cxaVZSZmR0eTdheWFxbQpQOFRnd3NxV0dtb2xSMHB2VlF6VGpBRVZXc3BpWUwwUmUvbmRDa2Yyc0FHdDVxWkQrMWthTmcybm80Qi8yNkZHCjExaStGQ2VmeCtReVdmUC9XaE55aDY0SVpaZUpmeXZpNFVFYW9Dc1RObXhNc0c2QTlCL1hRcmN0TlRwc2RmcXcKQURuS2dHWXBqNEdtM0JOcE1EUUJlQ05UQko3YTdVdXIvbHZDaytxNTVJZTREbzVOM2FDOC9LajVBQjVVeFhXNgo5L1hRN1prTS9yWWdVOTVhRTlSaHNaR0gzUmVDZFEycXpUQ2NZS0JrQVpkT29XSkRjVU1GTCtXR1YwK1ZPT3h4Cm83TzZpQi9xc2ZHL2ZYMkUxMjlpSi8yYy9QOXJrZWpiQ2VQR0pnVmltdk1kVkFZUmovb1JGdjV3RURIcy9qd1UKakJxYWtyc294OEk1RllpeTFWWXlUUWloN2wwaWtLejkwaWRLZ0pBREI2NXpmb3ZwZmFJd0VLWlBUdk95bjFLaAo3SVFSQnZhUnlDZCtTbzVKd1AyaEVwcy9GS3U1Z0E0N29ySVpJT0RhbHNJSUk3QmgvaHNnZS9vcnVYWGtyK2tpCk1SSDQ0R3V4eEV2T1N3VktvNHJzR1NaZnVzUTV2dWd6ektTUFJNeGU0YU1ndzNoYTRac3NVQkRYMlB4UEc1KzgKSlBjQ0R3MkJobFJ6RVhHTDdxbm1CNitrRUw3OUw3cmpRRlJBK3ZXTTVTN2N5bGN1M1NaT1VPU3BJblBBa3VsVwpTYW9ISW5LOFpDSEEwd2E0MmY0M2dQN1VmcEJjekxDOTNVZVlzbHRuZkNxQjM1eXErVnExVG9XWC90Tm5XWG81CkxPRWpKQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUdCVENDQSsyZ0F3SUJBZ0lDRUFBd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1pjeEN6QUpCZ05WQkFZVEFsVlQKTVJFd0R3WURWUVFJREFoV2FYSm5hVzVwWVRFVE1CRUdBMVVFQnd3S1FXeGxlR0Z1WkhKcFlURXFNQ2dHQTFVRQpDZ3doUkdWamFYQm9aWElnVkdWamFHNXZiRzluZVNCVGRIVmthVzl6TENCTVRFTXVNUlF3RWdZRFZRUUxEQXRGCmJtZHBibVZsY21sdVp6RWVNQndHQTFVRUF3d1ZSR1ZqYVhCb1pYSWdSRWt5UlNCU2IyOTBJRU5CTUI0WERURTQKTURjeE1ERTJOVGd3TmxvWERUSTRNRGN3TnpFMk5UZ3dObG93Z1lveEN6QUpCZ05WQkFZVEFsVlRNUkV3RHdZRApWUVFJREFoV2FYSm5hVzVwWVRFcU1DZ0dBMVVFQ2d3aFJHVmphWEJvWlhJZ1ZHVmphRzV2Ykc5bmVTQlRkSFZrCmFXOXpMQ0JNVEVNdU1SUXdFZ1lEVlFRTERBdEZibWRwYm1WbGNtbHVaekVtTUNRR0ExVUVBd3dkUkdWamFYQm8KWlhJZ1JFa3lSU0JKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDRHdBdwpnZ0lLQW9JQ0FRRDNJMWRKMWlzOE9wQlVJNTNsaWRJKytLYitKQjBnNkVkckRZRTZ4elZmREt6aVloeVVHdGhnCjZzNDl6cmZRZ3FaemRWMDdlVWxzU3FpR0hmbWxPSkhEOHNTdTdWRjZCYktWRUZoaitHSkVkakJoYnVlckxuZjUKY3JrTS9uWFRsYXVUSGkvZklNbDczMWw5dTJQWnZUUlNJRUlXSFVSQ3dCL2VqdkVlclQxUjNYOFdIaDVqbDZubApYdXJVcGtDN1FMMEE2MHUyMU1rbmRyNDYxT0U1dDZYY0hLWmZKdHk5MW5iQ0luT2NsbWtCb3lFNFc2K3RnWHdHCnBndWQrbVpSVW5RTUgxa3NxK0VFT2hQQ3lpTElPVnBRek1BMWY0dDlhTDUzLzNDdUhwRTFqRkZ6cDRvRjlOM0YKTFN3RW9RSzZqMjdJNHdTSDJSNisydk5tcHh3bkVvOS9qNWxBRitmWE55cGcvb0pyeTNkRXg0TkRobmplOFNSNQpzVStBK3B1VjRzQ3VEUGRMS3Z6Z0R4WjNTdFdpUmFWZ0tENGRYYUg1Vk9pT0VFZDdXRE1lRTJrRDVlL251eU9FCmFDeXVPeXNYMG5PNHZJUytYQ1ZCMk84YXU2dWlCVy9kalk5blhQTXIvTEZwWDJQQ2hZcXNRWmMyT1c2UXdCb2UKWS9qaXBacGdNRW9aeHJVNVo4Q3UxM1JlQk1zMnp6bDlNQmloOG5KSlRRTkdaT3YydmptcXZEYURIZnpJL2UrMApFZmI3K3pHNUVqVjVTQytvazZnMUR6a0NQeCtkNUkxQkdkQ1NwU1JnQlRTQm1XWVBtNFdmVjhjQXNDNVFueHBlCkV5TkZaeGFKeXRzckx6UU9VNk5lSm9TQm9FS20xeC9HU2JwUkJXN0dMN0RkVzZwWnhNUFRxd0lEQVFBQm8yWXcKWkRBZEJnTlZIUTRFRmdRVWJlcjVPRU9nWDVyVXBqdDdBQnZWWjVUZm9FNHdId1lEVlIwakJCZ3dGb0FVVHZLWQp0cnAwcGZDSTB6Q25uN3dQY094eFdSRXdFZ1lEVlIwVEFRSC9CQWd3QmdFQi93SUJBREFPQmdOVkhROEJBZjhFCkJBTUNBWVl3RFFZSktvWklodmNOQVFFTEJRQURnZ0lCQU1rOGViaEdxOHNtZ1FRTStValhLSWw1eEJYWDdraTQKbERmbmtCOU5TVEdjTXJtZEk1K0Z3eFM5RVJMdFhiaWcyMnFhaFl1L3BMWjJuWTJJRDNoQW5DMEdzNm5QNXFBZAplRncvd21ycDYxbzJPYUFKUmo2VTRBOCtOendVWVpKT2hpM0ZPVVI5U1ljOXl3ZHRFR2wyMThBZC9aSFBZSzVUCmQwbzlobCtSakpCTmhCK2dQMHFtVk5aWktEa0ZJSXRKNC9nYjBGM2lQK2NBVjlSUllTYVhlN0ZNVVJQMGtwVlQKTVpjUE43R3dJV2pHbWY5VEZGajVscFE5TVA4Y29mSjFsNjU1b3JmaGVST1gwcGJlRk1FNDVQZE1CV3ZKaXk4LwpnMzdpQWJnN1RmdlRyTW9CMytwdEovTENMdG5yYlU0VzBubGYwdmFwa0JxQ2dYRVgzZUZvTUN5QTh2cmNKWSs1CnhxQkcrM09WN2JkWWdxWUtENGhPQUdwbGQyU2VvVTBaSDZpQ2x6d3EvL0hJVGhPVHJxcy9ubnlsdzU2T1Fpem0Kb3R5anhEbEtMNy85ZnJKa2JaMU9VOEZuaUJGeXQ1dkRSYi8wQjRvSXlwRUF4UDBHaWtEdU5Xb3FaWEtVais1NgpRS0RtdVN2bW1xdGRZc2VpbXFGNlF4YTdDRHVpNGhqSTVjVUxMbWdEU0UzRHpPRURpRDdIMmIyNTQvUkE1YmZNCjU3TC9XZkJjKytQQXJBdlRacWRLVXlBU25LY1lGZGpwSXh4TFlTWFF3ZnpFRm83bllhWVZBLzg2by9tZE0zNVgKcm1WUDlZQStSUHZ0YjgwMEZHd29QMTlzZnBSd0phdkgvaTR5L3duTWFzYnRabVJkbWRBRktXOEZkWDBtUUpKZwptTFdDY0NnaUhCTEYKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJR0ZqQ0NBLzZnQXdJQkFnSUpBUDV2S29GTmQ2QVVNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1JR1hNUXN3Q1FZRApWUVFHRXdKVlV6RVJNQThHQTFVRUNBd0lWbWx5WjJsdWFXRXhFekFSQmdOVkJBY01Da0ZzWlhoaGJtUnlhV0V4CktqQW9CZ05WQkFvTUlVUmxZMmx3YUdWeUlGUmxZMmh1YjJ4dloza2dVM1IxWkdsdmN5d2dURXhETGpFVU1CSUcKQTFVRUN3d0xSVzVuYVc1bFpYSnBibWN4SGpBY0JnTlZCQU1NRlVSbFkybHdhR1Z5SUVSSk1rVWdVbTl2ZENCRApRVEFlRncweE9EQTNNVEF4TlRFM01qRmFGdzB6T0RBM01EVXhOVEUzTWpGYU1JR1hNUXN3Q1FZRFZRUUdFd0pWClV6RVJNQThHQTFVRUNBd0lWbWx5WjJsdWFXRXhFekFSQmdOVkJBY01Da0ZzWlhoaGJtUnlhV0V4S2pBb0JnTlYKQkFvTUlVUmxZMmx3YUdWeUlGUmxZMmh1YjJ4dloza2dVM1IxWkdsdmN5d2dURXhETGpFVU1CSUdBMVVFQ3d3TApSVzVuYVc1bFpYSnBibWN4SGpBY0JnTlZCQU1NRlVSbFkybHdhR1Z5SUVSSk1rVWdVbTl2ZENCRFFUQ0NBaUl3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUEFEQ0NBZ29DZ2dJQkFNeUJRZU9MQVM3ZHIzYWNXV0VoUG1aTjVjSnIKUUg0Mlk0cy82VGZQTzcwdCtTZjJOOUNEUHhsRko0SXBkQ1ovZm5ZVENhY3l3TTZDNXF6c3hoSk1FeFBRWGFMNwoyYzJBa21wR2xUMU10MFNIV1ZueUFWalF1cTRhVVoxUEFSSVJaYTdhUXdCSEg0QzBCSTFsUkMybGJMWEFIWXYwCmx2TERQUHppcWZseWNGa2xES1N2Vkg4ekFqbkhJSjh0RXhpclFrVUFrV1lndnMrSE42cGVINnRad1R4ektEUzcKOUtGWmdDdC9qVVo2Y3RVZWV0dVloNVU3WVJjdjg3Y29zZUNTTFhScHp3cFlKUHh5TVFmUStXazAzOEdUMnp5YgozZlNXRXF1R3VRVlNSMUplTDc3clNnNDlmNThqVFRpQjBSOU96b0JiNDFyVzNRNEVmVG1lM2cycHFiRVpYZXA3ClhROXE4YnltWlNPYWhlcWJTTlFqWGhaQlgvMzJwZGM3UmtoNDViVU51MEk3TUIyN2JCMCsyOW5vNXVnNnNMUHgKU2h3clNoVUF4dXNKL2FtT3ZDT2R2MEluNHJ5TEhLWU1lSHk2OUZDbTNNd0o5bG9FeHdyelJvVXluSXVORURwOQpVemhSV1J0aEtFK2g3WXpCNnFuY0lQcHI2TnFpZ3RUWXJ0dkJtNHJmcE1TZk8ySmpIT2hab3UxdStJVXg2N2VaCkFNTGdYNGtGNDdmdlJTOGRSd1UyVXZ4UWlYd3pFdEtMVHF0SW1kQ0VzZjJkRlhBby90OW9ZRG9FZG5BZk11TVUKNkRIMFNDelVhTnl5VElPSnlTazVVajJtdnA0TzlxdUdSZFFBZ2h2MFFQT2ZyY0d0cVVQRmpFZ3NEMjRXK0R0NQpHcmdXZERXdjFnTThzTStOQWdNQkFBR2pZekJoTUIwR0ExVWREZ1FXQkJSTzhwaTJ1blNsOElqVE1LZWZ2QTl3CjdIRlpFVEFmQmdOVkhTTUVHREFXZ0JSTzhwaTJ1blNsOElqVE1LZWZ2QTl3N0hGWkVUQVBCZ05WSFJNQkFmOEUKQlRBREFRSC9NQTRHQTFVZER3RUIvd1FFQXdJQmhqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFSZWdSbmUxNgpxUVBqRjNiWUsvMHROaDZJQVl1dmwvNDJUaENoYVpDSmUwVzBhbVV5UEhTWDc0SDBiQmw2R3pKbHZUbzBYS1QzCkk5eWZCbDhTeHd0MnQ0WDk0a0FRSS8xRTlVL09jdXZzWFV0TWZhM0IrVzc5YkpVdHB0ay91aWJiemxrR05aOFoKSCt2TWd3ZTZyandrTWd4S3J5SlIzaDJTdzQwS0lNcGQ5WlhSb0tQcGd4K1h1enJ1RkptTXZRWXRyeXRScFlIeApWR242eDh5QUNmMUVJdi83ckhwUFRLS1h2NnhhK3E5V1g0NTVscmROY1BTZE84cmpJNmdVcWNiczBxMTgyQ216Cm9XM0kyUzgvMUZaZVdSbng0T1NxRUR5UzlJY0hmaFFJd2FsSjkxaEUzb1JwTlpRU0tEU05TS0RIeDBJb1BKcUoKRGxSUDdHcVY4dmJRemRpZVh0VXJvVzd0OU9RN3FBdkNOaUdqbkwySVQvN29tcWx6ZGNmQTdkTmhRcDQybGxLNQo1NFdzVE9YRmlsUTJNbDhOdlBVL1F0NHRxRWpRSnp3blMyUU4zY2VmZ1lDQzhJSnljNjZFTVFIQjQ2VVBSeU94CnhUbmNxRkZIMlJFRGU2QWorMkt2V2xnMnpVaUM2SUtHS09KVVhKb01ESlJUYmducmFaalBvWCtMQW53aUcxMVIKcnhVYjNPYmpORDYyS1hCYk5Lc1R5S2hEUTh5VWIxaEdCc1dkU25iNk03RzdDdXZFTkdmQVlUQW9MMWtyRVU5NAp0SXZIMlNGbEZKcGE2dHhZQ202blNHNTlMRm00Y1ByZHFCMDNYVDdZZXpYd1VUQmpMQTJrakxIY3BuL3NmcXhBCnNDai9kRTVMdy8wNkJ1cEtaRFJ6cE1iWW00bFhoTWtZNC9RPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t"
        - name: "EGRESS_TLS_CERT"
          value: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZvRENDQTRpZ0F3SUJBZ0lDRUZvd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1lveEN6QUpCZ05WQkFZVEFsVlQKTVJFd0R3WURWUVFJREFoV2FYSm5hVzVwWVRFcU1DZ0dBMVVFQ2d3aFJHVmphWEJvWlhJZ1ZHVmphRzV2Ykc5bgplU0JUZEhWa2FXOXpMQ0JNVEVNdU1SUXdFZ1lEVlFRTERBdEZibWRwYm1WbGNtbHVaekVtTUNRR0ExVUVBd3dkClJHVmphWEJvWlhJZ1JFa3lSU0JKYm5SbGNtMWxaR2xoZEdVZ1EwRXdIaGNOTVRrd05EQTBNVFExTkRJNVdoY04KTWprd05EQXhNVFExTkRJNVdqQVVNUkl3RUFZRFZRUUREQWxrYVRKbExuUmxjM1F3Z2dFaU1BMEdDU3FHU0liMwpEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURndXdPTTlRbzZiS2JuRFJ5TnNkRUhCM2I4SGsrTVVHNU1lb1hqClBaeW9RUDJSaDV5QTVHWmFaK0Vva2JjZnZWakJDclIzbzA4NjJVSVU0aWdTMTVvMTNsRkM1Zm53aDBNSHhGTmkKajhqcVpNbGZTSmJYdmdlQ1BIWkovaGJZK2dNNDFHTk9sdFJTb0t1Z25EU1k5Rm4ydStyWnhZelBjQ09CUVZoNwptQWpKMWQ5bTNXK0VLTTN5cTlRVjdpSnR1TS9kbDJIVjlFSThFSllaRm1TN1lLaGtOK2lSYlN0OXhsczl3TnR1CmNXUDlmSTRjakZMdUVDSEI5bWhMeThMZWJUK3pHRUFOMW1hMTNGTHdLTzFnWUZuVG1JZXNpY2pHdmQrNnhkb3gKVTNSbVVFMU9NSllIM2tvTCtMWkw1Qy9UdTdzODVMZC9jaCtRU3VJdkV5eks3amZiQWdNQkFBR2pnZ0dETUlJQgpmekFKQmdOVkhSTUVBakFBTUJFR0NXQ0dTQUdHK0VJQkFRUUVBd0lHd0RBekJnbGdoa2dCaHZoQ0FRMEVKaFlrClQzQmxibE5UVENCSFpXNWxjbUYwWldRZ1UyVnlkbVZ5SUVObGNuUnBabWxqWVhSbE1CMEdBMVVkRGdRV0JCVE8KMlYwaGltR3pMQVJqbyszbTRyQzREMm9xRURDQnhRWURWUjBqQklHOU1JRzZnQlJ0NnZrNFE2QmZtdFNtTzNzQQpHOVZubE4rZ1RxR0JuYVNCbWpDQmx6RUxNQWtHQTFVRUJoTUNWVk14RVRBUEJnTlZCQWdNQ0ZacGNtZHBibWxoCk1STXdFUVlEVlFRSERBcEJiR1Y0WVc1a2NtbGhNU293S0FZRFZRUUtEQ0ZFWldOcGNHaGxjaUJVWldOb2JtOXMKYjJkNUlGTjBkV1JwYjNNc0lFeE1ReTR4RkRBU0JnTlZCQXNNQzBWdVoybHVaV1Z5YVc1bk1SNHdIQVlEVlFRRApEQlZFWldOcGNHaGxjaUJFU1RKRklGSnZiM1FnUTBHQ0FoQUFNQTRHQTFVZER3RUIvd1FFQXdJRHFEQWRCZ05WCkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0ZBWURWUjBSQkEwd0M0SUpaR2t5WlM1MFpYTjAKTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFBeHNUTU5LZkxPTHZCUkZTejBvem1jSGU2MjY0Q1BraTdNNjB6RgowR2JxUnd4cG50MkhMbXdEVWRRTWRtdCtUeGdpUERZc2lzOFZyRkRFclBXcEJzcVNUTEhyTGZJSHJnb29RcWorCnZVc21SRGhaWWVBWmxIdlhvL2hEVDRQaGdnVFVwTmp4dTE5QmZoTGZYNXU1a0NJVElWQjlqVWpXSVdadzJVdDUKTlhpRkZlRzY5MTJ1Wlc5d3VEUXlpYm9tdExsbG9lZG9jWFZjSXVRQ216L0hnZ3BQQzBJUHhjbExQZHg2dkRFbgo3cTE1MjRnTEJyeVV6a0tPQStMZU5yVnFlRmpaWnNUVVR0RU1vSDlPaEVwNmFtOUZ0NmtTNFZjbE1DVklmV25NCnpmRUdFenpBRG51blZjWjJnV0xVaU9vWm1WcnU3V0ltNjd0S2t5ZTRKWlBnU3pzZStZZ2tsRTVncjRsZEVpZ3EKY1VNWnJLZjlOV044M0VNdkFjMTZBbkVZSnhiWjArMHVKb09ydkszMjhaazlacVVIaVdvaUpFS3lyTkt4emVuNQp4U2UzeVR2am9JclZJQkVEWVBLWVBWRE5kd3RhUjhVR0gxUnBsUHVONUwwK0hmaWVTbVZkQk5aMWVXOFRUWVhYClZRb1pXeDZlY2twTmFBeU0rZEdyc0c2QzZPZXoxaUs4QnEzaGdJTnhScGRvWVVHWVlYZGRhNEQwTkhUS29jNnIKSnd3VEs1V3VuVnQ0ck1wdHBxVlZCc3dJQnlob2UzYjdwa1h0ZzhnNWNoVk5obDVKR1lhdnRPRGF5MDJ0dS8rKwpNbFR2dTZ1dXRQQ2hwbHhEVkVOdU0zOER4VWdldnlZZFNwTGIrS2FHV2dUVEtGRVlxdEhwSkxKaUF1dWR5dmJICm43WHB1dz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0="
        - name: "EGRESS_TLS_KEY"
          value: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBNExzRGpQVUtPbXltNXcwY2piSFJCd2QyL0I1UGpGQnVUSHFGNHoyY3FFRDlrWWVjCmdPUm1XbWZoS0pHM0g3MVl3UXEwZDZOUE90bENGT0lvRXRlYU5kNVJRdVg1OElkREI4UlRZby9JNm1USlgwaVcKMTc0SGdqeDJTZjRXMlBvRE9OUmpUcGJVVXFDcm9KdzBtUFJaOXJ2cTJjV016M0FqZ1VGWWU1Z0l5ZFhmWnQxdgpoQ2pOOHF2VUZlNGliYmpQM1pkaDFmUkNQQkNXR1Jaa3UyQ29aRGZva1cwcmZjWmJQY0RiYm5Gai9YeU9ISXhTCjdoQWh3ZlpvUzh2QzNtMC9zeGhBRGRabXRkeFM4Q2p0WUdCWjA1aUhySW5JeHIzZnVzWGFNVk4wWmxCTlRqQ1cKQjk1S0MvaTJTK1F2MDd1N1BPUzNmM0lma0VyaUx4TXN5dTQzMndJREFRQUJBb0lCQUJtT2l3ZlRzaGNVMWlJKwpobm5DdUEvQmxKRjFiUHg3QlNBamF1aDkwRHYrTUJnRndSR1RaK1J1SGRmOFFrUVV4MndrcUlOV2lpTWFJLzYxCi9YS3ZIRFYyRSsyMHM2amI2UTZRRUIrTVZILzdlRDhpeFN6QnlwN1ArMi9NdXBKd1ZEOTVQOVhuSnp4Q1UySlAKZ1ZmSHFoZDZKV29nb2pQUS8raXFJc0xqZGxSbGpKVkZaeVJNbjQydEI2MmNhN3k1K1lBZXYwam9XQS9kVWdsSApGTS9CQmdhYzdjZTU5VkJobmdxODBIYTJtbXNZdU85LytKeTk4eXVaYU1jc3BWMStqaDczZkQ1OXBrTmEyU2NHCjQvci9NSUYwSG9pQ3hEUHZlOGJ1TEp1Mk5FRTZieUtIT3prTkJsWXZuaWh1YkpwV2ZDSnhDS3NBWVpwTC9nWVUKN0IrOU5XRUNnWUVBOE9wU1hucFpwckJuL0RhQ0NuSzMyeFZQY3F6WEFGRHJQQWR6TjB1YU4xN0hKRi9xN2V1Qwp1N21jSWtQdU1kaExjWGtVME1DYzUwODF3b3pHaXVEc0N5cFFmTjNUVWxFdEMxeUo1Rk9xN2hNaGxxYklBUGVJCnkvZ0tQMVRKemVPRjI4akVzYVViZlV6a3p1SllxK1VsenQvUE5IRDdlTURNUFlLSFJLKzBJYkVDZ1lFQTdzMUQKVEZXT1R1dlM3V01sU2c0L3RBZ3grTGlyZGpDZXRYTXU4RllOd2Jmem52aXJ1M0orZTJkVWRmOFg5SC80WnJpRwpsV3d2aDcrQWI5NFhYdDQzUkJPSEhIWFlxdWlkSUVsQlREMUZrSTBwSkhSOGl5ajRrSnFESnRYN3lydmF2eDJ0CkdDT3dQUDJHYVFyS3Bab00vbDFqSzVxUjFiM2pSZ3FHcmJtektVc0NnWUFHVHR4aFJPcmNCbnB5akNyVGd6VjEKTXhXbGR3a2FKUVJEeWg0bU1JQ1ZPcElVVGI2bEJDbWtLTFFCNGExMitLYmhEYjZSeUxsVEJTdnZNQ2h5c25qNwp3ZHZocVIxRFpvUzdhMnpnNFovMEkrUVpRYnl5NmNoWEx1TjF6UTZMcVkxenQ4b09yTGdQaTlmaDR1TlhmT1NFCmlpK3V1OWFaenRLS09jUzQ4N0RQd1FLQmdRREt2amlwNFdWOStkZk50Y1JkK0hUN1M0M3BwaGZrczJpN2t2eEMKRGoyRnY4QzFzbGhUUCtURXJyalZxV3RVS1NYalNEenpOYk93NDlTT3BaZGY4dmdtOHhGZUIydVp4djVJQUFuUgpTWi83RnUzY1JvM0t0RkU4ckFJM2dhdFJ0MllEcHBWa0RrQzl0MTFiWjA4ZmhBZ09HWWx0NXNCMElOQ0prYnhBCldJNFV1d0tCZ0JDUGRWMU1Ydk5iTWZuYTFhOUFDQ1VYVUNaL3NVTG9XK0ZkR3BSOGllcDhudzRra2VFektMVE0KMHdzZzZpaHI3NE5qSzNEcVdZbTRvbTZKNmxVRHdCdy8remVrcGticGh0SFh0bTAvOVVGNzVwVms3bjNVWldKUApuVXBjS3dTdUsrbEJiaXR0ek95WElZU2FhWnhHQ0Z3dno1NitZaGNOdi90a24zendZb3l2Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t"
        - name: "EGRESS_TLS_TRUST"
          value: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZvRENDQTRpZ0F3SUJBZ0lDRUZvd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1lveEN6QUpCZ05WQkFZVEFsVlQKTVJFd0R3WURWUVFJREFoV2FYSm5hVzVwWVRFcU1DZ0dBMVVFQ2d3aFJHVmphWEJvWlhJZ1ZHVmphRzV2Ykc5bgplU0JUZEhWa2FXOXpMQ0JNVEVNdU1SUXdFZ1lEVlFRTERBdEZibWRwYm1WbGNtbHVaekVtTUNRR0ExVUVBd3dkClJHVmphWEJvWlhJZ1JFa3lSU0JKYm5SbGNtMWxaR2xoZEdVZ1EwRXdIaGNOTVRrd05EQXpNVGMxTnpFM1doY04KTWprd016TXhNVGMxTnpFM1dqQVVNUkl3RUFZRFZRUUREQWxrYVRKbExuUmxjM1F3Z2dFaU1BMEdDU3FHU0liMwpEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURPcDJTRHQ4R04vU0w4NGxESjBmM2JBTWNOVEJQU2RFZThkL253ClpmQUMvRkx0Ym1NR0J4Z3l3dmw3ZktEZWQxUXZ6OHp3eXZyNStnVlJEUUIzdlBCSGJxUnFqV2ZPOWZWNXEraFkKRjJPRDlCY3BINE5vUlZoRHhpVHZNb2hhNUNQMUQ1YitpbHBHY3NJTlRpbjV6SWlFb1YxWisrbUlVdGhrNlN4QQo2N1V6VXJPS1NnM2VUUHRaRjBrSVRxSm9kY1ljbjFwSEszWkEvK3BhTVdjNVFSRmVqSlFudFZaZ1M1aUxJTVZsCkwvWjM0Z3BNNHljbThheDlJWkwzVUN5SHg5RXNDTjYrcDhRbEFoVFVzaFhkdTNhcXlPUW1FQ0t0dE9TLzJmZjMKdG12Nk9zQ2dPSlZEaEZUT1UyM1haRmZFNzZ5L1RzTkkvb2YwSWMxMndra2M2eEZaQWdNQkFBR2pnZ0dETUlJQgpmekFKQmdOVkhSTUVBakFBTUJFR0NXQ0dTQUdHK0VJQkFRUUVBd0lHd0RBekJnbGdoa2dCaHZoQ0FRMEVKaFlrClQzQmxibE5UVENCSFpXNWxjbUYwWldRZ1UyVnlkbVZ5SUVObGNuUnBabWxqWVhSbE1CMEdBMVVkRGdRV0JCU0UKZktFZkhsejB5M2RBbGQwdCtSUkVTZGVYeHpDQnhRWURWUjBqQklHOU1JRzZnQlJ0NnZrNFE2QmZtdFNtTzNzQQpHOVZubE4rZ1RxR0JuYVNCbWpDQmx6RUxNQWtHQTFVRUJoTUNWVk14RVRBUEJnTlZCQWdNQ0ZacGNtZHBibWxoCk1STXdFUVlEVlFRSERBcEJiR1Y0WVc1a2NtbGhNU293S0FZRFZRUUtEQ0ZFWldOcGNHaGxjaUJVWldOb2JtOXMKYjJkNUlGTjBkV1JwYjNNc0lFeE1ReTR4RkRBU0JnTlZCQXNNQzBWdVoybHVaV1Z5YVc1bk1SNHdIQVlEVlFRRApEQlZFWldOcGNHaGxjaUJFU1RKRklGSnZiM1FnUTBHQ0FoQUFNQTRHQTFVZER3RUIvd1FFQXdJRm9EQWRCZ05WCkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0ZBWURWUjBSQkEwd0M0SUpaR2t5WlM1MFpYTjAKTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFBLzZJQkZzeHNhUTJienhNQW5Gc2E1Y3cxaVZSZmR0eTdheWFxbQpQOFRnd3NxV0dtb2xSMHB2VlF6VGpBRVZXc3BpWUwwUmUvbmRDa2Yyc0FHdDVxWkQrMWthTmcybm80Qi8yNkZHCjExaStGQ2VmeCtReVdmUC9XaE55aDY0SVpaZUpmeXZpNFVFYW9Dc1RObXhNc0c2QTlCL1hRcmN0TlRwc2RmcXcKQURuS2dHWXBqNEdtM0JOcE1EUUJlQ05UQko3YTdVdXIvbHZDaytxNTVJZTREbzVOM2FDOC9LajVBQjVVeFhXNgo5L1hRN1prTS9yWWdVOTVhRTlSaHNaR0gzUmVDZFEycXpUQ2NZS0JrQVpkT29XSkRjVU1GTCtXR1YwK1ZPT3h4Cm83TzZpQi9xc2ZHL2ZYMkUxMjlpSi8yYy9QOXJrZWpiQ2VQR0pnVmltdk1kVkFZUmovb1JGdjV3RURIcy9qd1UKakJxYWtyc294OEk1RllpeTFWWXlUUWloN2wwaWtLejkwaWRLZ0pBREI2NXpmb3ZwZmFJd0VLWlBUdk95bjFLaAo3SVFSQnZhUnlDZCtTbzVKd1AyaEVwcy9GS3U1Z0E0N29ySVpJT0RhbHNJSUk3QmgvaHNnZS9vcnVYWGtyK2tpCk1SSDQ0R3V4eEV2T1N3VktvNHJzR1NaZnVzUTV2dWd6ektTUFJNeGU0YU1ndzNoYTRac3NVQkRYMlB4UEc1KzgKSlBjQ0R3MkJobFJ6RVhHTDdxbm1CNitrRUw3OUw3cmpRRlJBK3ZXTTVTN2N5bGN1M1NaT1VPU3BJblBBa3VsVwpTYW9ISW5LOFpDSEEwd2E0MmY0M2dQN1VmcEJjekxDOTNVZVlzbHRuZkNxQjM1eXErVnExVG9XWC90Tm5XWG81CkxPRWpKQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUdCVENDQSsyZ0F3SUJBZ0lDRUFBd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1pjeEN6QUpCZ05WQkFZVEFsVlQKTVJFd0R3WURWUVFJREFoV2FYSm5hVzVwWVRFVE1CRUdBMVVFQnd3S1FXeGxlR0Z1WkhKcFlURXFNQ2dHQTFVRQpDZ3doUkdWamFYQm9aWElnVkdWamFHNXZiRzluZVNCVGRIVmthVzl6TENCTVRFTXVNUlF3RWdZRFZRUUxEQXRGCmJtZHBibVZsY21sdVp6RWVNQndHQTFVRUF3d1ZSR1ZqYVhCb1pYSWdSRWt5UlNCU2IyOTBJRU5CTUI0WERURTQKTURjeE1ERTJOVGd3TmxvWERUSTRNRGN3TnpFMk5UZ3dObG93Z1lveEN6QUpCZ05WQkFZVEFsVlRNUkV3RHdZRApWUVFJREFoV2FYSm5hVzVwWVRFcU1DZ0dBMVVFQ2d3aFJHVmphWEJvWlhJZ1ZHVmphRzV2Ykc5bmVTQlRkSFZrCmFXOXpMQ0JNVEVNdU1SUXdFZ1lEVlFRTERBdEZibWRwYm1WbGNtbHVaekVtTUNRR0ExVUVBd3dkUkdWamFYQm8KWlhJZ1JFa3lSU0JKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDRHdBdwpnZ0lLQW9JQ0FRRDNJMWRKMWlzOE9wQlVJNTNsaWRJKytLYitKQjBnNkVkckRZRTZ4elZmREt6aVloeVVHdGhnCjZzNDl6cmZRZ3FaemRWMDdlVWxzU3FpR0hmbWxPSkhEOHNTdTdWRjZCYktWRUZoaitHSkVkakJoYnVlckxuZjUKY3JrTS9uWFRsYXVUSGkvZklNbDczMWw5dTJQWnZUUlNJRUlXSFVSQ3dCL2VqdkVlclQxUjNYOFdIaDVqbDZubApYdXJVcGtDN1FMMEE2MHUyMU1rbmRyNDYxT0U1dDZYY0hLWmZKdHk5MW5iQ0luT2NsbWtCb3lFNFc2K3RnWHdHCnBndWQrbVpSVW5RTUgxa3NxK0VFT2hQQ3lpTElPVnBRek1BMWY0dDlhTDUzLzNDdUhwRTFqRkZ6cDRvRjlOM0YKTFN3RW9RSzZqMjdJNHdTSDJSNisydk5tcHh3bkVvOS9qNWxBRitmWE55cGcvb0pyeTNkRXg0TkRobmplOFNSNQpzVStBK3B1VjRzQ3VEUGRMS3Z6Z0R4WjNTdFdpUmFWZ0tENGRYYUg1Vk9pT0VFZDdXRE1lRTJrRDVlL251eU9FCmFDeXVPeXNYMG5PNHZJUytYQ1ZCMk84YXU2dWlCVy9kalk5blhQTXIvTEZwWDJQQ2hZcXNRWmMyT1c2UXdCb2UKWS9qaXBacGdNRW9aeHJVNVo4Q3UxM1JlQk1zMnp6bDlNQmloOG5KSlRRTkdaT3YydmptcXZEYURIZnpJL2UrMApFZmI3K3pHNUVqVjVTQytvazZnMUR6a0NQeCtkNUkxQkdkQ1NwU1JnQlRTQm1XWVBtNFdmVjhjQXNDNVFueHBlCkV5TkZaeGFKeXRzckx6UU9VNk5lSm9TQm9FS20xeC9HU2JwUkJXN0dMN0RkVzZwWnhNUFRxd0lEQVFBQm8yWXcKWkRBZEJnTlZIUTRFRmdRVWJlcjVPRU9nWDVyVXBqdDdBQnZWWjVUZm9FNHdId1lEVlIwakJCZ3dGb0FVVHZLWQp0cnAwcGZDSTB6Q25uN3dQY094eFdSRXdFZ1lEVlIwVEFRSC9CQWd3QmdFQi93SUJBREFPQmdOVkhROEJBZjhFCkJBTUNBWVl3RFFZSktvWklodmNOQVFFTEJRQURnZ0lCQU1rOGViaEdxOHNtZ1FRTStValhLSWw1eEJYWDdraTQKbERmbmtCOU5TVEdjTXJtZEk1K0Z3eFM5RVJMdFhiaWcyMnFhaFl1L3BMWjJuWTJJRDNoQW5DMEdzNm5QNXFBZAplRncvd21ycDYxbzJPYUFKUmo2VTRBOCtOendVWVpKT2hpM0ZPVVI5U1ljOXl3ZHRFR2wyMThBZC9aSFBZSzVUCmQwbzlobCtSakpCTmhCK2dQMHFtVk5aWktEa0ZJSXRKNC9nYjBGM2lQK2NBVjlSUllTYVhlN0ZNVVJQMGtwVlQKTVpjUE43R3dJV2pHbWY5VEZGajVscFE5TVA4Y29mSjFsNjU1b3JmaGVST1gwcGJlRk1FNDVQZE1CV3ZKaXk4LwpnMzdpQWJnN1RmdlRyTW9CMytwdEovTENMdG5yYlU0VzBubGYwdmFwa0JxQ2dYRVgzZUZvTUN5QTh2cmNKWSs1CnhxQkcrM09WN2JkWWdxWUtENGhPQUdwbGQyU2VvVTBaSDZpQ2x6d3EvL0hJVGhPVHJxcy9ubnlsdzU2T1Fpem0Kb3R5anhEbEtMNy85ZnJKa2JaMU9VOEZuaUJGeXQ1dkRSYi8wQjRvSXlwRUF4UDBHaWtEdU5Xb3FaWEtVais1NgpRS0RtdVN2bW1xdGRZc2VpbXFGNlF4YTdDRHVpNGhqSTVjVUxMbWdEU0UzRHpPRURpRDdIMmIyNTQvUkE1YmZNCjU3TC9XZkJjKytQQXJBdlRacWRLVXlBU25LY1lGZGpwSXh4TFlTWFF3ZnpFRm83bllhWVZBLzg2by9tZE0zNVgKcm1WUDlZQStSUHZ0YjgwMEZHd29QMTlzZnBSd0phdkgvaTR5L3duTWFzYnRabVJkbWRBRktXOEZkWDBtUUpKZwptTFdDY0NnaUhCTEYKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJR0ZqQ0NBLzZnQXdJQkFnSUpBUDV2S29GTmQ2QVVNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1JR1hNUXN3Q1FZRApWUVFHRXdKVlV6RVJNQThHQTFVRUNBd0lWbWx5WjJsdWFXRXhFekFSQmdOVkJBY01Da0ZzWlhoaGJtUnlhV0V4CktqQW9CZ05WQkFvTUlVUmxZMmx3YUdWeUlGUmxZMmh1YjJ4dloza2dVM1IxWkdsdmN5d2dURXhETGpFVU1CSUcKQTFVRUN3d0xSVzVuYVc1bFpYSnBibWN4SGpBY0JnTlZCQU1NRlVSbFkybHdhR1Z5SUVSSk1rVWdVbTl2ZENCRApRVEFlRncweE9EQTNNVEF4TlRFM01qRmFGdzB6T0RBM01EVXhOVEUzTWpGYU1JR1hNUXN3Q1FZRFZRUUdFd0pWClV6RVJNQThHQTFVRUNBd0lWbWx5WjJsdWFXRXhFekFSQmdOVkJBY01Da0ZzWlhoaGJtUnlhV0V4S2pBb0JnTlYKQkFvTUlVUmxZMmx3YUdWeUlGUmxZMmh1YjJ4dloza2dVM1IxWkdsdmN5d2dURXhETGpFVU1CSUdBMVVFQ3d3TApSVzVuYVc1bFpYSnBibWN4SGpBY0JnTlZCQU1NRlVSbFkybHdhR1Z5SUVSSk1rVWdVbTl2ZENCRFFUQ0NBaUl3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUEFEQ0NBZ29DZ2dJQkFNeUJRZU9MQVM3ZHIzYWNXV0VoUG1aTjVjSnIKUUg0Mlk0cy82VGZQTzcwdCtTZjJOOUNEUHhsRko0SXBkQ1ovZm5ZVENhY3l3TTZDNXF6c3hoSk1FeFBRWGFMNwoyYzJBa21wR2xUMU10MFNIV1ZueUFWalF1cTRhVVoxUEFSSVJaYTdhUXdCSEg0QzBCSTFsUkMybGJMWEFIWXYwCmx2TERQUHppcWZseWNGa2xES1N2Vkg4ekFqbkhJSjh0RXhpclFrVUFrV1lndnMrSE42cGVINnRad1R4ektEUzcKOUtGWmdDdC9qVVo2Y3RVZWV0dVloNVU3WVJjdjg3Y29zZUNTTFhScHp3cFlKUHh5TVFmUStXazAzOEdUMnp5YgozZlNXRXF1R3VRVlNSMUplTDc3clNnNDlmNThqVFRpQjBSOU96b0JiNDFyVzNRNEVmVG1lM2cycHFiRVpYZXA3ClhROXE4YnltWlNPYWhlcWJTTlFqWGhaQlgvMzJwZGM3UmtoNDViVU51MEk3TUIyN2JCMCsyOW5vNXVnNnNMUHgKU2h3clNoVUF4dXNKL2FtT3ZDT2R2MEluNHJ5TEhLWU1lSHk2OUZDbTNNd0o5bG9FeHdyelJvVXluSXVORURwOQpVemhSV1J0aEtFK2g3WXpCNnFuY0lQcHI2TnFpZ3RUWXJ0dkJtNHJmcE1TZk8ySmpIT2hab3UxdStJVXg2N2VaCkFNTGdYNGtGNDdmdlJTOGRSd1UyVXZ4UWlYd3pFdEtMVHF0SW1kQ0VzZjJkRlhBby90OW9ZRG9FZG5BZk11TVUKNkRIMFNDelVhTnl5VElPSnlTazVVajJtdnA0TzlxdUdSZFFBZ2h2MFFQT2ZyY0d0cVVQRmpFZ3NEMjRXK0R0NQpHcmdXZERXdjFnTThzTStOQWdNQkFBR2pZekJoTUIwR0ExVWREZ1FXQkJSTzhwaTJ1blNsOElqVE1LZWZ2QTl3CjdIRlpFVEFmQmdOVkhTTUVHREFXZ0JSTzhwaTJ1blNsOElqVE1LZWZ2QTl3N0hGWkVUQVBCZ05WSFJNQkFmOEUKQlRBREFRSC9NQTRHQTFVZER3RUIvd1FFQXdJQmhqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFSZWdSbmUxNgpxUVBqRjNiWUsvMHROaDZJQVl1dmwvNDJUaENoYVpDSmUwVzBhbVV5UEhTWDc0SDBiQmw2R3pKbHZUbzBYS1QzCkk5eWZCbDhTeHd0MnQ0WDk0a0FRSS8xRTlVL09jdXZzWFV0TWZhM0IrVzc5YkpVdHB0ay91aWJiemxrR05aOFoKSCt2TWd3ZTZyandrTWd4S3J5SlIzaDJTdzQwS0lNcGQ5WlhSb0tQcGd4K1h1enJ1RkptTXZRWXRyeXRScFlIeApWR242eDh5QUNmMUVJdi83ckhwUFRLS1h2NnhhK3E5V1g0NTVscmROY1BTZE84cmpJNmdVcWNiczBxMTgyQ216Cm9XM0kyUzgvMUZaZVdSbng0T1NxRUR5UzlJY0hmaFFJd2FsSjkxaEUzb1JwTlpRU0tEU05TS0RIeDBJb1BKcUoKRGxSUDdHcVY4dmJRemRpZVh0VXJvVzd0OU9RN3FBdkNOaUdqbkwySVQvN29tcWx6ZGNmQTdkTmhRcDQybGxLNQo1NFdzVE9YRmlsUTJNbDhOdlBVL1F0NHRxRWpRSnp3blMyUU4zY2VmZ1lDQzhJSnljNjZFTVFIQjQ2VVBSeU94CnhUbmNxRkZIMlJFRGU2QWorMkt2V2xnMnpVaUM2SUtHS09KVVhKb01ESlJUYmducmFaalBvWCtMQW53aUcxMVIKcnhVYjNPYmpORDYyS1hCYk5Lc1R5S2hEUTh5VWIxaEdCc1dkU25iNk03RzdDdXZFTkdmQVlUQW9MMWtyRVU5NAp0SXZIMlNGbEZKcGE2dHhZQ202blNHNTlMRm00Y1ByZHFCMDNYVDdZZXpYd1VUQmpMQTJrakxIY3BuL3NmcXhBCnNDai9kRTVMdy8wNkJ1cEtaRFJ6cE1iWW00bFhoTWtZNC9RPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t"
        portMappings:
        - containerPort: 9080
          hostPort: 9080
          protocol: tcp
        - containerPort: 8081
          hostPort: 8081
          protocol: tcp
        mountPoints:
        - containerPath: "/etc/proxy/tls/sidecar"
          sourceVolume: certs
        logConfiguration:
          logDriver: awslogs
          options:
            awslogs-group: openjobs
            awslogs-region: "{{ aws_region }}"
            awslogs-stream-prefix: web
      - name: control-api
        essential: false
        image: "docker.production.deciphernow.com/deciphernow/gm-control-api:0.8.1"
        repositoryCredentials:
          credentialsParameter: "{{ credentials_parameter }}"
        dockerLabels:
          gm-cluster: "service-control-api"
        environment:
        - name: "GM_CONTROL_API_ADDRESS"
          value: "0.0.0.0:5555"
        - name: "GM_CONTROL_API_LOG_LEVEL"
          value: debug
        - name: "GM_CONTROL_API_ORG_KEY"
          value: deciphernow
        - name: "GM_CONTROL_API_PERSISTER_PATH"
          value: "app/control-api/data/backend.json"
        - name: "GM_CONTROL_CMD"
          value: ecs
        - name: "GM_CONTROL_API_PERSISTER_TYPE"
          value: file
        - name: "GM_CONTROL_API_ZONE_KEY"
          value: "default-zone"
        portMappings:
        - containerPort: 5555
          hostPort: 5555
          protocol: tcp
        logConfiguration:
          logDriver: awslogs
          options:
            awslogs-group: openjobs
            awslogs-region: "{{ aws_region }}"
            awslogs-stream-prefix: web
    register: task_output

  - name: ECS service control-api
    ecs_service:
      state: present
      name: control-api
      cluster: "{{ cluster_name }}"
      region: "{{ aws_region }}"
      launch_type: FARGATE
      task_definition: "{{  task_output.taskdefinition[\"family\"]   }}:{{ task_output.taskdefinition[\"revision\"] }}"
      desired_count: 1
      network_configuration:
        assign_public_ip: true
        security_groups: "{{ security_group }}"
        subnets: "{{ subnet_list }}"
      load_balancers:
        - targetGroupArn: "{{ task_target_group }}"
          containerName: "proxy-control-api"
          containerPort: 9080
    register: "ecs_service"
